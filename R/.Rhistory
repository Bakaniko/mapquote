# PIN
pins <- makeIcon(
iconUrl = "../img/pin.svg",
iconWidth = 30, iconHeight = 30,
iconAnchorX = 15, iconAnchorY = 15
)
m <- leaflet(quotes) %>%
addProviderTiles(providers$Esri.WorldImagery) %>%
addMarkers(~lng, ~lat, popup = ~labelhtml, clusterOptions = markerClusterOptions(), icon = pins ) %>%
addScaleBar(position = "bottomleft") %>%
addControl(title, className="map-title") %>%
addControl(source, className="map-note") %>%
addControl(contrib, className="map-contrib")
m
library(leaflet)
library(bibtex)
library(RefManageR)
library(htmltools)
library(htmlwidgets)
# https://rstudio.github.io/leaflet/markers.html
# DATA IMPORT
bib <- ReadBib(file = "../data/biblio.bib")
bib <- as.data.frame(bib)
bib$id <- row.names(bib)
bib$author <- sub("\\}", "", bib$author)
bib$author <- sub("\\{", "", bib$author)
q <- read.csv("../data/quotes.csv", stringsAsFactors=FALSE)
loc <- read.csv("../data/authors.csv", stringsAsFactors=FALSE)
quotes <- merge(x = q, y = bib, by.x = "book", by.y = "id", all.y=T)
quotes <- merge(x = quotes, y = loc, by.x = "author", by.y = "author", all.y=T)
words <- read.csv("../data/words.csv", stringsAsFactors=FALSE)
words <- words$words
# POPUP FORMATING
col <- "#fce303"
for (i in 1:length(words)){
quotes$quote <- sub(paste0(" ",words[i]," "), paste0(" <span style='background:",col,"'>",words[i],"</span> </u>"), quotes$quote)
quotes$quote <- sub(paste0(" ",words[i],"\\,"), paste0(" <span style='background:",col,"'>",words[i],"</span>,</u>"), quotes$quote)
quotes$quote <- sub(paste0(" ",words[i],"\\."), paste0(" <span style='background:",col,"'>",words[i],"</span>.</u>"), quotes$quote)
}
quotes$labelhtml <- paste0(
"<div width='300px' align='center'>",
"<h2>",
"« ",quotes$quote," »",
"</h2>",
"<b>",quotes$author,"</b> ",quotes$location,".<br/>",
"<i>",quotes$title,"</i>. ",quotes$publisher,", ",quotes$year,".",
"</div>"
)
# TITLE
title <- tags$div(includeCSS("../css/maptitle.css"), HTML("<i>MapQuote</i>"))
source <- tags$div(includeCSS("../css/mapnote.css"), HTML(paste0("Carte conçue par <b>Nicolas Lambert</b> & <b>Françoise Bahoken</b>. Mise à jour : ",Sys.Date(), " (",dim(bib)[1]," livres et ", dim(quotes)[1]," citations)" )))
contrib <- tags$div(includeCSS("../css/contrib.css"), HTML("<a href='form.html' target='_blank'><img src='img/contribuez.svg'></img></a>"))
# PIN
pins <- makeIcon(
iconUrl = "../img/pin.svg",
iconWidth = 30, iconHeight = 30,
iconAnchorX = 15, iconAnchorY = 15
)
m <- leaflet(quotes) %>%
addProviderTiles(providers$Esri.WorldImagery) %>%
addMarkers(~lng, ~lat, popup = ~labelhtml, clusterOptions = markerClusterOptions(), icon = pins ) %>%
addScaleBar(position = "bottomleft") %>%
addControl(title, className="map-title") %>%
addControl(source, className="map-note") %>%
addControl(contrib, className="map-contrib")
m
library(leaflet)
library(bibtex)
library(RefManageR)
library(htmltools)
library(htmlwidgets)
# https://rstudio.github.io/leaflet/markers.html
# DATA IMPORT
bib <- ReadBib(file = "../data/biblio.bib")
bib <- as.data.frame(bib)
bib$id <- row.names(bib)
bib$author <- sub("\\}", "", bib$author)
bib$author <- sub("\\{", "", bib$author)
q <- read.csv("../data/quotes.csv", stringsAsFactors=FALSE)
loc <- read.csv("../data/authors.csv", stringsAsFactors=FALSE)
quotes <- merge(x = q, y = bib, by.x = "book", by.y = "id", all.y=T)
quotes <- merge(x = quotes, y = loc, by.x = "author", by.y = "author", all.y=T)
words <- read.csv("../data/words.csv", stringsAsFactors=FALSE)
words <- words$words
# POPUP FORMATING
col <- "#fce303"
for (i in 1:length(words)){
quotes$quote <- sub(paste0(" ",words[i]," "), paste0(" <span style='background:",col,"'>",words[i],"</span> </u>"), quotes$quote)
quotes$quote <- sub(paste0(" ",words[i],"\\,"), paste0(" <span style='background:",col,"'>",words[i],"</span>,</u>"), quotes$quote)
quotes$quote <- sub(paste0(" ",words[i],"\\."), paste0(" <span style='background:",col,"'>",words[i],"</span>.</u>"), quotes$quote)
}
quotes$labelhtml <- paste0(
"<div width='300px' align='center'>",
"<h2>",
"« ",quotes$quote," »",
"</h2>",
"<b>",quotes$author,"</b> ",quotes$location,".<br/>",
"<i>",quotes$title,"</i>. ",quotes$publisher,", ",quotes$year,".",
"</div>"
)
# TITLE
title <- tags$div(includeCSS("../css/maptitle.css"), HTML("<i>MapQuote</i>"))
source <- tags$div(includeCSS("../css/mapnote.css"), HTML(paste0("Carte conçue par <b>Nicolas Lambert</b> & <b>Françoise Bahoken</b>. Mise à jour : ",Sys.Date(), " (",dim(bib)[1]," livres et ", dim(quotes)[1]," citations)" )))
contrib <- tags$div(includeCSS("../css/contrib.css"), HTML("<a href='form.html' target='_blank'><img src='img/contribuez.svg'></img></a>"))
# PIN
pins <- makeIcon(
iconUrl = "../img/pin.svg",
iconWidth = 30, iconHeight = 30,
iconAnchorX = 15, iconAnchorY = 15
)
m <- leaflet(quotes) %>%
addProviderTiles(providers$Esri.WorldImagery) %>%
addMarkers(~lng, ~lat, popup = ~labelhtml, clusterOptions = markerClusterOptions(), icon = pins ) %>%
addScaleBar(position = "bottomleft") %>%
addControl(title, className="map-title") %>%
addControl(source, className="map-note") %>%
addControl(contrib, className="map-contrib")
m
library(leaflet)
library(bibtex)
library(RefManageR)
library(htmltools)
library(htmlwidgets)
# https://rstudio.github.io/leaflet/markers.html
# DATA IMPORT
bib <- ReadBib(file = "../data/biblio.bib")
bib <- as.data.frame(bib)
bib$id <- row.names(bib)
bib$author <- sub("\\}", "", bib$author)
bib$author <- sub("\\{", "", bib$author)
q <- read.csv("../data/quotes.csv", stringsAsFactors=FALSE)
loc <- read.csv("../data/authors.csv", stringsAsFactors=FALSE)
quotes <- merge(x = q, y = bib, by.x = "book", by.y = "id", all.y=T)
quotes <- merge(x = quotes, y = loc, by.x = "author", by.y = "author", all.y=T)
words <- read.csv("../data/words.csv", stringsAsFactors=FALSE)
words <- words$words
# POPUP FORMATING
col <- "#fce303"
for (i in 1:length(words)){
quotes$quote <- sub(paste0(" ",words[i]," "), paste0(" <span style='background:",col,"'>",words[i],"</span> </u>"), quotes$quote)
quotes$quote <- sub(paste0(" ",words[i],"\\,"), paste0(" <span style='background:",col,"'>",words[i],"</span>,</u>"), quotes$quote)
quotes$quote <- sub(paste0(" ",words[i],"\\."), paste0(" <span style='background:",col,"'>",words[i],"</span>.</u>"), quotes$quote)
}
quotes$labelhtml <- paste0(
"<div width='300px' align='center'>",
"<h2>",
"« ",quotes$quote," »",
"</h2>",
"<b>",quotes$author,"</b> ",quotes$location,".<br/>",
"<i>",quotes$title,"</i>. ",quotes$publisher,", ",quotes$year,".",
"</div>"
)
# TITLE
title <- tags$div(includeCSS("../css/maptitle.css"), HTML("<i>MapQuote</i>"))
source <- tags$div(includeCSS("../css/mapnote.css"), HTML(paste0("Carte conçue par <b>Nicolas Lambert</b> & <b>Françoise Bahoken</b>. Mise à jour : ",Sys.Date(), " (",dim(bib)[1]," livres et ", dim(quotes)[1]," citations)" )))
contrib <- tags$div(includeCSS("../css/contrib.css"), HTML("<a href='form.html' target='_blank'><img src='img/contribuez.svg'></img></a>"))
# PIN
pins <- makeIcon(
iconUrl = "../img/pin.svg",
iconWidth = 30, iconHeight = 30,
iconAnchorX = 15, iconAnchorY = 15
)
m <- leaflet(quotes) %>%
addProviderTiles(providers$Esri.WorldImagery) %>%
addMarkers(~lng, ~lat, popup = ~labelhtml, clusterOptions = markerClusterOptions(), icon = pins ) %>%
addScaleBar(position = "bottomleft") %>%
addControl(title, className="map-title") %>%
addControl(source, className="map-note") %>%
addControl(contrib, className="map-contrib")
m
---
title: "Moving Beyond Borders"
subtitle: "Une exposition de Migreurop et Etrange miroir"
author: "Nicolas Lambert"
institute: "CNRS / UMS RIATE"
date: "`r Sys.Date()`"
output:
xaringan::moon_reader:
chakra: libs/remark-latest.min.js
lib_dir: libs
nature:
highlightStyle: github
highlightLines: true
countIncrementalSlides: true
css:
- default
- default-fonts
- "libs/css/animate.min.css"
- "libs/css/lambert.css"
- "libs/css/lambert-font.css"
seal: false
---
class: title-slide-custom
background-image: url(img/mbb/Affiche.png)
background-size: cover
# Moving Beyond Borders
## Une exposition <i>migrante</i> de Migreurop et Etrange miroir
### Nicolas Lambert, (`r Sys.Date()`) - nicolas.lambert@cnrs.fr
.logo[
<img src ="img/cnrs.gif"></img>
]
---
class: clear, bottom, center, animated, fadeIn
background-size: cover
background-image: url(img/mbb/mbb1.png)
---
class: clear, bottom, center, animated, fadeIn
background-size: cover
background-image: url(img/mbb/mbb2.png)
---
class: clear, bottom, center, animated, fadeIn
background-size: cover
background-image: url(img/mbb/mbb3.png)
---
class: clear, bottom, center, animated, fadeIn
background-size: cover
background-image: url(img/mbb/mbb4.png)
---
class: clear, bottom, center, animated, fadeIn
background-size: cover
background-image: url(img/mbb/mbb5.png)
---
class: clear, bottom, center, animated, fadeIn
background-size: cover
background-image: url(img/mbb/mbb6.png)
---
class: clear, bottom, center, animated, fadeIn
background-size: cover
background-image: url(img/mbb/mbb7.png)
---
class: clear, animated, fadeIn
# sss
.center[<img src="img/mbb/mbbmap.png" width=88%>]
---
class: clear, animated, fadeIn
<video width="100%" controls>
<source src="videos/Moving Beyond Borders.mp4" type="video/mp4">
</video>
.note[Retour en images sur la première étape de l'exposition à Bruxelles en juin 2015. L’exposition « Moving beyond Borders » propose une approche multimédia de la réalité migratoire contemporaine : Cartes vidéo projetées, photographies et paysages sonores composent une scénographie sensible et interactive imaginée par la compagnie Étrange Miroir. <br/><b>https://vimeo.com/141553025</b>]
---
class: clear, bottom
.big[
# MERCI
]
`BLOG`<br/>
[**neocarto.hypotheses.org**](https://neocarto.hypotheses.org/)
`E-MAIL`<br/>
[**nicolas.lambert@cnrs.fr**](mailto:nicolas.lambert@cnrs.fr)
`TWITTER`<br/>
[**@neocartocnrs**](https://twitter.com/neocartocnrs)
`GITHUB`<br/>
[**github.com/neocarto**](https://github.com/neocarto)
library(leaflet)
library(bibtex)
library(RefManageR)
library(htmltools)
library(htmlwidgets)
# https://rstudio.github.io/leaflet/markers.html
# DATA IMPORT
bib <- ReadBib(file = "../data/biblio.bib")
bib <- as.data.frame(bib)
bib$id <- row.names(bib)
bib$author <- sub("\\}", "", bib$author)
bib$author <- sub("\\{", "", bib$author)
q <- read.csv("../data/quotes.csv", stringsAsFactors=FALSE)
loc <- read.csv("../data/authors.csv", stringsAsFactors=FALSE)
quotes <- merge(x = q, y = bib, by.x = "book", by.y = "id", all.y=T)
quotes <- merge(x = quotes, y = loc, by.x = "author", by.y = "author", all.y=T)
words <- read.csv("../data/words.csv", stringsAsFactors=FALSE)
words <- words$words
# POPUP FORMATING
col <- "#fce303"
for (i in 1:length(words)){
quotes$quote <- sub(paste0(" ",words[i]," "), paste0(" <span style='background:",col,"'>",words[i],"</span> </u>"), quotes$quote)
quotes$quote <- sub(paste0(" ",words[i],"\\,"), paste0(" <span style='background:",col,"'>",words[i],"</span>,</u>"), quotes$quote)
quotes$quote <- sub(paste0(" ",words[i],"\\."), paste0(" <span style='background:",col,"'>",words[i],"</span>.</u>"), quotes$quote)
}
quotes$labelhtml <- paste0(
"<div width='300px' align='center'>",
"<h2>",
"« ",quotes$quote," »",
"</h2>",
"<b>",quotes$author,"</b> ",quotes$location,".<br/>",
"<i>",quotes$title,"</i>. ",quotes$publisher,", ",quotes$year,".",
"</div>"
)
# TITLE
title <- tags$div(includeCSS("../css/maptitle.css"), HTML("<i>MapQuote</i>"))
source <- tags$div(includeCSS("../css/mapnote.css"), HTML(paste0("Carte conçue par <b>Nicolas Lambert</b> & <b>Françoise Bahoken</b>. Mise à jour : ",Sys.Date(), " (",dim(bib)[1]," livres et ", dim(quotes)[1]," citations)" )))
contrib <- tags$div(includeCSS("../css/contrib.css"), HTML("<a href='form.html' target='_blank'><img src='img/contribuez.svg'></img></a>"))
# PIN
pins <- makeIcon(
iconUrl = "../img/pin.svg",
iconWidth = 30, iconHeight = 30,
iconAnchorX = 15, iconAnchorY = 15
)
m <- leaflet(quotes) %>%
addProviderTiles(providers$Esri.WorldImagery) %>%
addMarkers(~lng, ~lat, popup = ~labelhtml, clusterOptions = markerClusterOptions(), icon = pins ) %>%
addScaleBar(position = "bottomleft") %>%
addControl(title, className="map-title") %>%
addControl(source, className="map-note") %>%
addControl(contrib, className="map-contrib")
m
library(leaflet)
library(bibtex)
library(RefManageR)
library(htmltools)
library(htmlwidgets)
# https://rstudio.github.io/leaflet/markers.html
# DATA IMPORT
bib <- ReadBib(file = "../data/biblio.bib")
bib <- as.data.frame(bib)
bib$id <- row.names(bib)
bib$author <- sub("\\}", "", bib$author)
bib$author <- sub("\\{", "", bib$author)
q <- read.csv("../data/quotes.csv", stringsAsFactors=FALSE)
loc <- read.csv("../data/authors.csv", stringsAsFactors=FALSE)
quotes <- merge(x = q, y = bib, by.x = "book", by.y = "id", all.y=T)
quotes <- merge(x = quotes, y = loc, by.x = "author", by.y = "author", all.y=T)
words <- read.csv("../data/words.csv", stringsAsFactors=FALSE)
words <- words$words
# POPUP FORMATING
col <- "#fce303"
for (i in 1:length(words)){
quotes$quote <- sub(paste0(" ",words[i]," "), paste0(" <span style='background:",col,"'>",words[i],"</span> </u>"), quotes$quote)
quotes$quote <- sub(paste0(" ",words[i],"\\,"), paste0(" <span style='background:",col,"'>",words[i],"</span>,</u>"), quotes$quote)
quotes$quote <- sub(paste0(" ",words[i],"\\."), paste0(" <span style='background:",col,"'>",words[i],"</span>.</u>"), quotes$quote)
}
quotes$labelhtml <- paste0(
"<div width='300px' align='center'>",
"<h2>",
"« ",quotes$quote," »",
"</h2>",
"<b>",quotes$author,"</b> ",quotes$location,".<br/>",
"<i>",quotes$title,"</i>. ",quotes$publisher,", ",quotes$year,".",
"</div>"
)
# TITLE
title <- tags$div(includeCSS("../css/maptitle.css"), HTML("<i>MapQuote</i>"))
source <- tags$div(includeCSS("../css/mapnote.css"), HTML(paste0("Carte conçue par <b>Nicolas Lambert</b> & <b>Françoise Bahoken</b>. Mise à jour : ",Sys.Date(), " (",dim(bib)[1]," livres et ", dim(quotes)[1]," citations)" )))
contrib <- tags$div(includeCSS("../css/contrib.css"), HTML("<a href='form.html' target='_blank'><img src='img/contribuez.svg'></img></a>"))
# PIN
pins <- makeIcon(
iconUrl = "../img/pin.svg",
iconWidth = 30, iconHeight = 30,
iconAnchorX = 15, iconAnchorY = 15
)
m <- leaflet(quotes) %>%
addProviderTiles(providers$Esri.WorldImagery) %>%
addMarkers(~lng, ~lat, popup = ~labelhtml, clusterOptions = markerClusterOptions(), icon = pins ) %>%
addScaleBar(position = "bottomleft") %>%
addControl(title, className="map-title") %>%
addControl(source, className="map-note") %>%
addControl(contrib, className="map-contrib")
m
library(leaflet)
library(bibtex)
library(RefManageR)
library(htmltools)
library(htmlwidgets)
# https://rstudio.github.io/leaflet/markers.html
# DATA IMPORT
bib <- ReadBib(file = "../data/biblio.bib")
bib <- as.data.frame(bib)
bib$id <- row.names(bib)
bib$author <- sub("\\}", "", bib$author)
bib$author <- sub("\\{", "", bib$author)
q <- read.csv("../data/quotes.csv", stringsAsFactors=FALSE)
loc <- read.csv("../data/authors.csv", stringsAsFactors=FALSE)
quotes <- merge(x = q, y = bib, by.x = "book", by.y = "id", all.y=T)
quotes <- merge(x = quotes, y = loc, by.x = "author", by.y = "author", all.y=T)
words <- read.csv("../data/words.csv", stringsAsFactors=FALSE)
words <- words$words
# POPUP FORMATING
col <- "#fce303"
for (i in 1:length(words)){
quotes$quote <- sub(paste0(" ",words[i]," "), paste0(" <span style='background:",col,"'>",words[i],"</span> </u>"), quotes$quote)
quotes$quote <- sub(paste0(" ",words[i],"\\,"), paste0(" <span style='background:",col,"'>",words[i],"</span>,</u>"), quotes$quote)
quotes$quote <- sub(paste0(" ",words[i],"\\."), paste0(" <span style='background:",col,"'>",words[i],"</span>.</u>"), quotes$quote)
}
quotes$labelhtml <- paste0(
"<div width='300px' align='center'>",
"<h2>",
"« ",quotes$quote," »",
"</h2>",
"<b>",quotes$author,"</b> ",quotes$location,".<br/>",
"<i>",quotes$title,"</i>. ",quotes$publisher,", ",quotes$year,".",
"</div>"
)
# TITLE
title <- tags$div(includeCSS("../css/maptitle.css"), HTML("<i>MapQuote</i>"))
source <- tags$div(includeCSS("../css/mapnote.css"), HTML(paste0("Carte conçue par <b>Nicolas Lambert</b> & <b>Françoise Bahoken</b>. Mise à jour : ",Sys.Date(), " (",dim(bib)[1]," livres et ", dim(quotes)[1]," citations)" )))
contrib <- tags$div(includeCSS("../css/contrib.css"), HTML("<a href='form.html' target='_blank'><img src='img/contribuez.svg'></img></a>"))
# PIN
pins <- makeIcon(
iconUrl = "../img/pin.svg",
iconWidth = 30, iconHeight = 30,
iconAnchorX = 15, iconAnchorY = 15
)
m <- leaflet(quotes) %>%
addProviderTiles(providers$Esri.WorldImagery) %>%
addMarkers(~lng, ~lat, popup = ~labelhtml, clusterOptions = markerClusterOptions(), icon = pins ) %>%
addScaleBar(position = "bottomleft") %>%
addControl(title, className="map-title") %>%
addControl(source, className="map-note") %>%
addControl(contrib, className="map-contrib")
m
library(leaflet)
library(bibtex)
library(RefManageR)
library(htmltools)
library(htmlwidgets)
# https://rstudio.github.io/leaflet/markers.html
# DATA IMPORT
bib <- ReadBib(file = "../data/biblio.bib")
bib <- as.data.frame(bib)
bib$id <- row.names(bib)
bib$author <- sub("\\}", "", bib$author)
bib$author <- sub("\\{", "", bib$author)
q <- read.csv("../data/quotes.csv", stringsAsFactors=FALSE)
loc <- read.csv("../data/authors.csv", stringsAsFactors=FALSE)
quotes <- merge(x = q, y = bib, by.x = "book", by.y = "id", all.y=T)
quotes <- merge(x = quotes, y = loc, by.x = "author", by.y = "author", all.y=T)
words <- read.csv("../data/words.csv", stringsAsFactors=FALSE)
words <- words$words
# POPUP FORMATING
col <- "#fce303"
for (i in 1:length(words)){
quotes$quote <- sub(paste0(" ",words[i]," "), paste0(" <span style='background:",col,"'>",words[i],"</span> </u>"), quotes$quote)
quotes$quote <- sub(paste0(" ",words[i],"\\,"), paste0(" <span style='background:",col,"'>",words[i],"</span>,</u>"), quotes$quote)
quotes$quote <- sub(paste0(" ",words[i],"\\."), paste0(" <span style='background:",col,"'>",words[i],"</span>.</u>"), quotes$quote)
}
quotes$labelhtml <- paste0(
"<div width='300px' align='center'>",
"<h2>",
"« ",quotes$quote," »",
"</h2>",
"<b>",quotes$author,"</b> ",quotes$location,".<br/>",
"<i>",quotes$title,"</i>. ",quotes$publisher,", ",quotes$year,".",
"</div>"
)
# TITLE
title <- tags$div(includeCSS("../css/maptitle.css"), HTML("<i>MapQuote</i>"))
source <- tags$div(includeCSS("../css/mapnote.css"), HTML(paste0("Carte conçue par <b>Nicolas Lambert</b> & <b>Françoise Bahoken</b>. Mise à jour : ",Sys.Date(), " (",dim(bib)[1]," livres et ", dim(quotes)[1]," citations)" )))
contrib <- tags$div(includeCSS("../css/contrib.css"), HTML("<a href='form.html' target='_blank'><img src='img/contribuez.svg'></img></a>"))
# PIN
pins <- makeIcon(
iconUrl = "../img/pin.svg",
iconWidth = 30, iconHeight = 30,
iconAnchorX = 15, iconAnchorY = 15
)
m <- leaflet(quotes) %>%
addProviderTiles(providers$Esri.WorldImagery) %>%
addMarkers(~lng, ~lat, popup = ~labelhtml, clusterOptions = markerClusterOptions(), icon = pins ) %>%
addScaleBar(position = "bottomleft") %>%
addControl(title, className="map-title") %>%
addControl(source, className="map-note") %>%
addControl(contrib, className="map-contrib")
m
library(leaflet)
library(bibtex)
library(RefManageR)
library(htmltools)
library(htmlwidgets)
# https://rstudio.github.io/leaflet/markers.html
# DATA IMPORT
bib <- ReadBib(file = "../data/biblio.bib")
bib <- as.data.frame(bib)
bib$id <- row.names(bib)
bib$author <- sub("\\}", "", bib$author)
bib$author <- sub("\\{", "", bib$author)
q <- read.csv("../data/quotes.csv", stringsAsFactors=FALSE)
loc <- read.csv("../data/authors.csv", stringsAsFactors=FALSE)
quotes <- merge(x = q, y = bib, by.x = "book", by.y = "id", all.y=T)
quotes <- merge(x = quotes, y = loc, by.x = "author", by.y = "author", all.y=T)
words <- read.csv("../data/words.csv", stringsAsFactors=FALSE)
words <- words$words
# POPUP FORMATING
col <- "#fce303"
for (i in 1:length(words)){
quotes$quote <- sub(paste0(" ",words[i]," "), paste0(" <span style='background:",col,"'>",words[i],"</span> </u>"), quotes$quote)
quotes$quote <- sub(paste0(" ",words[i],"\\,"), paste0(" <span style='background:",col,"'>",words[i],"</span>,</u>"), quotes$quote)
quotes$quote <- sub(paste0(" ",words[i],"\\."), paste0(" <span style='background:",col,"'>",words[i],"</span>.</u>"), quotes$quote)
}
quotes$labelhtml <- paste0(
"<div width='300px' align='center'>",
"<h2>",
"« ",quotes$quote," »",
"</h2>",
"<b>",quotes$author,"</b> ",quotes$location,".<br/>",
"<i>",quotes$title,"</i>. ",quotes$publisher,", ",quotes$year,".",
"</div>"
)
# TITLE
title <- tags$div(includeCSS("../css/maptitle.css"), HTML("<i>MapQuote</i>"))
source <- tags$div(includeCSS("../css/mapnote.css"), HTML(paste0("Carte conçue par <b>Nicolas Lambert</b> & <b>Françoise Bahoken</b>. Mise à jour : ",Sys.Date(), " (",dim(bib)[1]," livres et ", dim(quotes)[1]," citations)" )))
contrib <- tags$div(includeCSS("../css/contrib.css"), HTML("<a href='form.html' target='_blank'><img src='img/contribuez.svg'></img></a>"))
# PIN
pins <- makeIcon(
iconUrl = "../img/pin.svg",
iconWidth = 30, iconHeight = 30,
iconAnchorX = 15, iconAnchorY = 15
)
m <- leaflet(quotes) %>%
addProviderTiles(providers$Esri.WorldImagery) %>%
addMarkers(~lng, ~lat, popup = ~labelhtml, clusterOptions = markerClusterOptions(), icon = pins ) %>%
addScaleBar(position = "bottomleft") %>%
addControl(title, className="map-title") %>%
addControl(source, className="map-note") %>%
addControl(contrib, className="map-contrib")
m
